# Load Balanced Configuration for AWS Elastic Beanstalk
# This configures the environment for load balanced setup with Application Load Balancer

option_settings:
  # Use t2.micro instance (free tier eligible for first 12 months)
  aws:autoscaling:launchconfiguration:
    InstanceType: t2.micro
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role
  
  # Load balanced environment (with Application Load Balancer)
  aws:elasticbeanstalk:environment:
    EnvironmentType: LoadBalanced
    ServiceRole: aws-elasticbeanstalk-service-role
  
  # Auto-scaling settings for load balanced environment
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 1
  
  # Health reporting (enhanced for load balanced)
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
  
  # CloudWatch logs
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 3
  
  # Disable rolling updates (not needed for single instance in load balanced setup)
  aws:autoscaling:updatepolicy:rollingupdate:
    RollingUpdateEnabled: false


